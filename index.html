<!doctype html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MineRise — Home (Standalone)</title>

  <!-- INLINE STYLES: self-contained so no missing files -->
  <style>
    :root{
      --bg-0:#070617; --bg-1:#0b1222; --card:#071a2b; --muted:#b6c6db;
      --accent-1:#ff8a2b; --accent-2:#ff5d3a; --text:#eef6ff; --radius:14px;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    }
    [data-theme="light"]{
      --bg-0:#f7fbff; --bg-1:#f2f6fb; --card:#ffffff; --muted:#445a73; --text:#071026;
      --accent-1:#ff7a1a; --accent-2:#ff9b4a;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      min-height:100vh;
      background:
        radial-gradient(800px 420px at 10% 6%, rgba(255,138,43,0.06), transparent 6%),
        linear-gradient(180deg,var(--bg-0) 0%, var(--bg-1) 70%);
      color:var(--text); padding:24px;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }

    /* container */
    .site{ width:1200px; max-width:96%; margin:0 auto; display:flex; flex-direction:column; gap:18px; position:relative; z-index:1; }

    /* header */
    header{ display:flex; align-items:center; justify-content:space-between; padding:14px; border-radius:14px; background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent); border:1px solid rgba(255,255,255,0.03) }
    .brand{ display:flex; gap:12px; align-items:center }
    .logo{ width:64px; height:64px; border-radius:14px; display:flex; align-items:center; justify-content:center; font-weight:900; color:#05121a; background:linear-gradient(135deg,var(--accent-1),var(--accent-2)); box-shadow:0 10px 30px rgba(255,106,43,0.08) }
    header h1{ font-size:28px; margin:0; letter-spacing:-0.5px }
    header p{ font-size:13px; color:var(--muted); margin-top:4px }

    nav{ display:flex; gap:10px; align-items:center }
    .nav-btn{ padding:8px 12px; border-radius:10px; background:transparent; border:1px solid rgba(255,255,255,0.03); color:var(--text); text-decoration:none; font-weight:700; cursor:pointer}
    .nav-btn.active{ background:linear-gradient(90deg,var(--accent-1),var(--accent-2)); color:#07121a; box-shadow:0 10px 30px rgba(255,106,43,0.12) }
    .theme-btn{ padding:8px 10px; border-radius:10px; background:transparent; border:1px solid rgba(255,255,255,0.03); cursor:pointer }

    /* bg layer (three.js mounts into #three-container) */
    #three-container{ position:fixed; inset:0; pointer-events:none; z-index:0; overflow:hidden }
    .fog-overlay{ position:fixed; left:-8%; right:-8%; bottom:-10%; height:420px; pointer-events:none; background:radial-gradient(ellipse at center, rgba(255,106,0,0.05), transparent 30%); filter:blur(40px); opacity:.95; mix-blend-mode:screen; z-index:0; animation:slow-drift 16s linear infinite }
    @keyframes slow-drift{0%{transform:translateX(0)}50%{transform:translateX(36px)}100%{transform:translateX(0)}}

    /* hero */
    .hero{ display:grid; grid-template-columns:1fr 420px; gap:22px; padding:26px; border-radius:18px; background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent); border:1px solid rgba(255,255,255,0.03) }
    .hero-left{ display:flex; flex-direction:column; gap:12px }
    .kicker{ background:linear-gradient(90deg,var(--accent-1),var(--accent-2)); color:#07121a; padding:6px 10px; border-radius:999px; font-weight:800; display:inline-block }
    .hero h2{ font-size:32px; margin:0 }
    .hero p{ color:var(--muted); max-width:72% }
    .hero-cta{ display:flex; gap:12px; margin-top:16px; align-items:center }
    .btn{ padding:10px 14px; border-radius:12px; background:var(--card); border:1px solid rgba(255,255,255,0.03); color:var(--text); cursor:pointer; font-weight:700 }
    .btn.primary{ background:linear-gradient(90deg,var(--accent-1),var(--accent-2)); color:#07121a; box-shadow:0 14px 40px rgba(255,106,43,0.12) }
    .ip{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, monospace; background:rgba(0,0,0,0.12); padding:6px 8px; border-radius:8px; color:var(--text) }

    .card{ background:linear-gradient(180deg, rgba(255,255,255,0.015), transparent); padding:14px; border-radius:12px; border:1px solid rgba(255,255,255,0.02) }
    .hero-right.card{ padding:16px; }
    .live-preview{ height:200px; border-radius:10px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.08)); display:flex; align-items:center; justify-content:center; font-weight:800; color:rgba(255,255,255,0.18) }

    .store-grid, .gallery-grid{ display:grid; gap:16px; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); margin-top:12px }
    .store-card{ background:var(--card); padding:12px; border-radius:10px }
    .gallery-tile img{ width:100%; height:180px; object-fit:cover; border-radius:8px }

    footer{ text-align:left; color:var(--muted); padding:12px; margin-top:8px }

    /* small helpers */
    .muted{ color:var(--muted) }
    .lift{ transition: transform .22s, box-shadow .22s }
    .tilt{ transition: transform .22s, box-shadow .22s }

    @media (max-width:900px){
      .hero{ grid-template-columns:1fr; padding:18px }
      header h1{ font-size:22px }
    }
  </style>
</head>
<body>
  <!-- Three.js canvas container (script will create canvas here) -->
  <div id="three-container" aria-hidden="true"></div>
  <div class="fog-overlay" aria-hidden="true"></div>

  <div class="site">
    <header>
      <div class="brand">
        <div class="logo">MR</div>
        <div>
          <h1>MineRise</h1>
          <p class="muted">Rise. Build. Conquer. • <span id="server-ip">Play.MineRise.Fun</span></p>
        </div>
      </div>

      <nav>
        <a class="nav-btn active" href="index.html">Home</a>
        <a class="nav-btn" href="store.html">Store</a>
        <a class="nav-btn" href="gallery.html">Gallery</a>
        <a class="nav-btn" href="connect.html">Connect</a>
        <button id="theme-toggle" class="theme-btn" title="Toggle theme">🌙</button>
      </nav>
    </header>

    <main>
      <section class="hero">
        <div class="hero-left">
          <div class="kicker">HALLOWEEN EVENT</div>
          <h2>MineRise — Spooky Season</h2>
          <p class="muted">Join Play.MineRise.Fun for Halloween events, limited cosmetics and haunted builds. Play with friends and climb the ranks.</p>

          <div class="hero-cta">
            <button class="btn primary copy-ip">Play • <span class="ip">Play.MineRise.Fun</span></button>
            <a class="btn" href="connect.html">How to Join</a>
          </div>

          <div style="margin-top:16px" class="muted">Next event: Oct 20 — Pumpkin PvP • Special aura rewards</div>
        </div>

        <aside class="hero-right card lift">
          <div class="live-preview">Live preview</div>
          <div style="margin-top:12px;display:flex;justify-content:space-between;align-items:center">
            <div class="muted">Players: <strong id="players">42</strong></div>
            <div><button class="btn">Vote</button></div>
          </div>
        </aside>
      </section>
    </main>

    <footer>© <span id="year"></span> MineRise • <a href="connect.html">Connect</a></footer>
  </div>

  <!-- INLINE SCRIPTS: main behaviors plus embedded threeScene loader -->
  <script>
  /***** assets/script.js logic (inline) *****/
  (function () {
    const THEME_KEY = 'mr_theme';
    const DEFAULT_IP = 'Play.MineRise.Fun';
    ['year','year2','year3','year4'].forEach(id=>{ const e = document.getElementById(id); if(e) e.textContent = new Date().getFullYear(); });
    function applyTheme(t){
      document.documentElement.setAttribute('data-theme', t);
      document.querySelectorAll('#theme-toggle, .theme-btn').forEach(btn=>{ btn.textContent = (t === 'dark' ? '🌙' : '☀️'); btn.setAttribute('aria-pressed', t === 'dark'); });
      localStorage.setItem(THEME_KEY, t);
    }
    const saved = localStorage.getItem(THEME_KEY) || (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
    applyTheme(saved);
    document.querySelectorAll('#theme-toggle, .theme-btn').forEach(btn=>{ btn.addEventListener('click', ()=> { const cur = document.documentElement.getAttribute('data-theme') || 'dark'; applyTheme(cur === 'dark' ? 'light' : 'dark'); }); });
    document.querySelectorAll('.copy-ip').forEach(btn=>{ btn.addEventListener('click', async () => { try{ await navigator.clipboard.writeText(DEFAULT_IP); const old = btn.innerHTML; btn.innerHTML = 'Copied!'; setTimeout(()=> btn.innerHTML = old, 1400); } catch(e){ console.warn('copy failed', e); } }); });
    (function markActive(){ const path = location.pathname.split('/').pop() || 'index.html'; document.querySelectorAll('nav a, .nav-btn').forEach(a=>{ const href = a.getAttribute('href') || ''; if (href.endsWith(path) || (path === '' && href.endsWith('index.html'))) a.classList.add('active'); else a.classList.remove('active'); }); })();
    const playersEl = document.getElementById('players'); if(playersEl){ setInterval(()=>{ const cur = Math.max(0, parseInt(playersEl.textContent||'42',10)); playersEl.textContent = Math.max(0, cur + (Math.random()>0.5?1:-1)); }, 3000); }
    // Expose API
    window.MineRise = { setIP(ip){ document.querySelectorAll('#server-ip, #server-ip-2, .ip').forEach(el=>{ if(el.tagName.toLowerCase()==='input') el.value = ip; else el.textContent = ip; }); } };
    // Try initThree if available (threeScene below defines window.initThree)
    setTimeout(()=>{ if(typeof window.initThree==='function') try{ window.initThree({ ip: DEFAULT_IP }); } catch(e){ console.warn('initThree error', e) } }, 700);
  })();
  </script>

  <script>
  /***** scripts/main.js (inline) *****/
  (function(){
    // lift hover
    document.querySelectorAll('.lift').forEach(el=> {
      el.addEventListener('mouseenter', ()=> { el.style.transform = 'translateY(-8px) scale(1.02)'; el.style.boxShadow = '0 20px 50px rgba(2,8,20,0.45)'; });
      el.addEventListener('mouseleave', ()=> { el.style.transform=''; el.style.boxShadow=''; });
    });
    // tilt
    document.querySelectorAll('.tilt').forEach(el=>{
      el.addEventListener('mousemove', (e)=> {
        const r = el.getBoundingClientRect(); const px = (e.clientX - r.left)/r.width; const py = (e.clientY - r.top)/r.height;
        const rx = (py - 0.5) * 10; const ry = (px - 0.5) * -14;
        el.style.transform = `perspective(900px) rotateX(${rx}deg) rotateY(${ry}deg) translateZ(8px)`;
        el.style.boxShadow = '0 30px 80px rgba(2,8,20,0.48)';
      });
      el.addEventListener('mouseleave', ()=> { el.style.transform=''; el.style.boxShadow=''; });
    });
    document.querySelectorAll('.fade-in').forEach((el,i)=>{ el.style.opacity=0; el.style.transform='translateY(6px)'; el.style.transition='opacity 520ms ease, transform 520ms ease'; setTimeout(()=>{ el.style.opacity=1; el.style.transform='translateY(0)'; }, 70+i*80); });
  })();
  </script>

  <script>
  /***** scripts/threeScene.js (inline) *****/
  (function(){
    const THREE_CDN = 'https://unpkg.com/three@0.152.2/build/three.min.js';
    function loadScript(src){ return new Promise((resolve,reject)=>{ if(document.querySelector(`script[src="${src}"]`)) return resolve(); const s=document.createElement('script'); s.src=src; s.async=true; s.onload=()=>resolve(); s.onerror=(e)=>reject(e); document.head.appendChild(s); }); }

    window.initThree = async function initThree(opts = {}) {
      if (typeof window.THREE === 'undefined') {
        try { await loadScript(THREE_CDN); } catch(e){ console.warn('three load failed', e); return; }
      }
      const THREE = window.THREE;
      if (!THREE) return;

      let container = document.getElementById('three-container');
      if (!container) { container = document.createElement('div'); container.id='three-container'; document.body.appendChild(container); }

      if (container.__initialized) return;
      container.__initialized = true;

      const renderer = new THREE.WebGLRenderer({ antialias:true, alpha:true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(Math.min(window.devicePixelRatio||1,2));
      renderer.domElement.style.position='fixed'; renderer.domElement.style.inset='0'; renderer.domElement.style.zIndex='0'; renderer.domElement.style.pointerEvents='none';
      container.appendChild(renderer.domElement);

      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(45, window.innerWidth/window.innerHeight, 0.1, 2000);
      camera.position.set(0,2.2,7);

      const amb = new THREE.AmbientLight(0xffffff, 0.6); scene.add(amb);
      const dir = new THREE.DirectionalLight(0xffb86b, 0.9); dir.position.set(5,10,5); scene.add(dir);

      const ground = new THREE.Mesh(new THREE.PlaneGeometry(200,200), new THREE.MeshStandardMaterial({ color:0x000000, transparent:true, opacity:0.02 }));
      ground.rotation.x = -Math.PI/2; ground.position.y = -3; scene.add(ground);

      function makePumpkin(scale=1, color=0xff8a2b){
        const g = new THREE.Group();
        const body = new THREE.Mesh(new THREE.SphereGeometry(0.9*scale, 16, 12), new THREE.MeshStandardMaterial({ color, roughness:0.6, metalness:0.05 }));
        body.scale.y = 0.8; g.add(body);
        const stem = new THREE.Mesh(new THREE.CylinderGeometry(0.06*scale,0.12*scale,0.35*scale,8), new THREE.MeshStandardMaterial({ color:0x3b2b18 }));
        stem.position.y = 0.9*scale; stem.rotation.x = 0.2; g.add(stem);
        return g;
      }

      const pumpkins=[]; for(let i=0;i<6;i++){ const s=0.7+Math.random()*0.9; const p=makePumpkin(s); p.position.set((Math.random()-0.5)*8, (Math.random()-0.25)*2+1, (Math.random()-0.5)*6); p.rotation.y=Math.random()*Math.PI*2; scene.add(p); pumpkins.push({mesh:p,speed:0.2+Math.random()*0.6,yo:p.position.y}); }

      function makeBat(){
        const geom = new THREE.BufferGeometry();
        const verts = new Float32Array([ -0.8,0,0, 0,0.2,0, 0.8,0,0, -0.8,0,0, -1.6,-0.6,0, 0,-0.2,0 ]);
        geom.setAttribute('position', new THREE.BufferAttribute(verts,3));
        geom.computeVertexNormals();
        const mat = new THREE.MeshStandardMaterial({ color:0x0b0b0b, roughness:0.9 });
        const m = new THREE.Mesh(geom, mat);
        m.scale.set(0.9,0.9,0.9);
        return m;
      }

      const bats=[]; for(let i=0;i<3;i++){ const b=makeBat(); b.position.set((Math.random()-0.5)*20, 2+Math.random()*4, -6+Math.random()*6); b.rotation.z = (Math.random()-0.5)*0.8; scene.add(b); bats.push({mesh:b,speed:0.4+Math.random()*0.6}); }

      const glow = new THREE.Group(); for(let i=0;i<20;i++){ const pl = new THREE.PointLight(0xff8a2b, 0.08, 8); pl.position.set((Math.random()-0.5)*10, Math.random()*3, (Math.random()-0.5)*6); glow.add(pl); } scene.add(glow);

      let t=0; function animate(){ t+=0.01; pumpkins.forEach((p,i)=>{ p.mesh.position.y = p.yo + Math.sin(t * p.speed + i) * 0.28; p.mesh.rotation.y += 0.002 + (i%2?0.002:-0.002); }); bats.forEach((b,i)=>{ b.mesh.position.x += Math.sin(t * b.speed + i) * 0.02; b.mesh.position.y += Math.cos(t * b.speed + i) * 0.01; b.mesh.rotation.z = Math.sin(t * b.speed + i) * 0.4; if(b.mesh.position.x > 16) b.mesh.position.x = -18; }); renderer.render(scene,camera); requestAnimationFrame(animate); } animate();

      function onResize(){ renderer.setSize(window.innerWidth, window.innerHeight); camera.aspect = window.innerWidth / window.innerHeight; camera.updateProjectionMatrix(); } window.addEventListener('resize', onResize);

      window.addEventListener('mousemove', (ev)=>{ const nx = (ev.clientX / window.innerWidth - 0.5) * 2; const ny = (ev.clientY / window.innerHeight - 0.5) * 2; camera.position.x += (nx * 0.8 - camera.position.x) * 0.04; camera.position.y += (-ny * 0.6 - camera.position.y) * 0.04; camera.lookAt(0,0.8,0); });

      if(opts && typeof opts.ip === 'string'){ document.querySelectorAll('.ip,#server-ip,#server-ip-2').forEach(el=>{ if(el.tagName.toLowerCase()==='input') el.value = opts.ip; else el.textContent = opts.ip; }); }

      console.log('threeScene initialized');
      return { scene, camera, renderer };
    };
  })();
  </script>

  <!-- diagnostics to confirm load -->
  <script>
    window.addEventListener('load', () => {
      console.group('MineRise Diagnostics');
      console.log('CSS applied? background should be dark (check).');
      console.log('window.initThree:', typeof window.initThree === 'function' ? 'present' : 'missing');
      console.groupEnd();
      // Try to initialize 3D immediately
      if (typeof window.initThree === 'function') {
        try { window.initThree({ ip: document.getElementById('server-ip')?.textContent || 'Play.MineRise.Fun' }); }
        catch(e){ console.warn('initThree error', e); }
      }
    });
  </script>
</body>
</html>
